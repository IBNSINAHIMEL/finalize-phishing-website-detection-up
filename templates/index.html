<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phishing and Scam Website Detector</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <!-- Auto-popup preference (optional) -->
<div class="settings-toggle" style="position: fixed; bottom: 20px; right: 20px; z-index: 1000;">
    <label style="background: white; padding: 10px; border-radius: 5px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
        <input type="checkbox" id="autoPopupToggle" checked> 
        Auto-show score popup
    </label>
</div>
    
</head>
<body>
    <div class="container">
        <header>
            <h1>Phishing and Scam Website Detector</h1>
            <div class="header-actions">
                {% if username %}
                    <a href="{{ url_for('scan_history') }}" class="history-btn">
                        üìã Scan History
                    </a>
                    <a href="{{ url_for('profile') }}" class="profile-btn">
                        üë§ {{ username }}
                    </a>
                {% else %}
                    <div class="auth-buttons">
                        <a href="{{ url_for('login') }}" class="auth-btn">Login</a>
                        <a href="{{ url_for('register') }}" class="auth-btn">Register</a>
                    </div>
                {% endif %}
            </div>
            <p>Protect yourself from malicious websites</p>
        </header>

        <main>
            <div class="scan-section">
                <h2>Scan a URL</h2>

                <div class="detector-options">
                    <button id="phishingDetectorBtn" class="detector-btn active">Phishing Website Detector</button>
                    <button id="scamDetectorBtn" class="detector-btn">Scam or Legit Website Detector</button>
                </div>

                <!-- Phishing Detector -->
                <div id="phishingMode" class="detector-mode active">
                    <div class="mode-description">
                        <p>Detects phishing attempts that try to steal your personal information.</p>
                    </div>
                    <div class="input-group">
                        <input type="text" id="urlInput" placeholder="Enter URL to scan (e.g., https://example.com)">
                        <button id="scanBtn">Scan</button>
                    </div>
                </div>

                <!-- Scam Detector -->
                <div id="scamMode" class="detector-mode">
                    <div class="mode-description">
                        <p>Specifically designed to help freelancers identify scam job offers and client websites.</p>
                    </div>
                    <div class="input-group">
                        <input type="text" id="scamUrlInput" placeholder="Enter client website or job posting URL">
                        <button id="scamScanBtn">Scan</button>
                    </div>
                </div>
                

<!-- WITH THIS: -->
    <div id="loading" class="loading-container hidden">
    <div class="loading-steps">
        <h3>üîç Scanning Website...</h3>
        <div class="step active" id="step1">
            <span class="step-icon">‚è≥</span>
            <span class="step-text">Validating URL</span>
        </div>
        <div class="step" id="step2">
            <span class="step-icon">‚è≥</span>
            <span class="step-text">Checking Google Safe Browsing</span>
        </div>
        <div class="step" id="step3">
            <span class="step-icon">‚è≥</span>
            <span class="step-text">Analyzing website content</span>
        </div>
        <div class="step" id="step4">
            <span class="step-icon">‚è≥</span>
            <span class="step-text">Capturing screenshot</span>
        </div>
        <div class="step" id="step5">
            <span class="step-icon">‚è≥</span>
            <span class="step-text">Final analysis</span>
        </div>
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        <p class="loading-time" id="loadingTime">Elapsed time: 0s</p>
        </div>
        </div>
                
                <div id="result" class="result hidden"></div>
            </div>

            <!-- New Analysis Sections -->
            <div id="analysisSections" class="analysis-sections">
                <!-- Contact Information Section -->
                <div class="analysis-section">
                    <h3 class="section-title">Contact Information Found</h3>
                    <div class="contact-grid">
                        <div class="contact-category">
                            <h4>Email Addresses</h4>
                            <ul class="contact-list" id="emailList">
                                <li class="no-contact">No email addresses found</li>
                            </ul>
                        </div>
                        <div class="contact-category">
                            <h4>Phone Numbers</h4>
                            <ul class="contact-list" id="phoneList">
                                <li class="no-contact">No phone numbers found</li>
                            </ul>
                        </div>
                        <div class="contact-category">
                            <h4>Contact Pages</h4>
                            <ul class="contact-list" id="contactPageList">
                                <li class="no-contact">No contact pages found</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Website Screenshot Section -->
                <div class="analysis-section">
    <h3 class="section-title">Website Screenshot</h3>
    <div class="screenshot-container" id="screenshotContainer">
        <div class="screenshot-placeholder">
            <p>Screenshot will be displayed here after analysis</p>
        </div>
    </div>
    
    <!-- Image Analysis Container -->
    <div id="imageAnalysisResult" class="image-analysis-container">
        <h4 class="image-analysis-title">üñºÔ∏è Image Analysis</h4>
        <div id="imageAnalysisContent" class="image-analysis-content">
            <!-- Image analysis results will appear here -->
        </div>
    </div>
</div>

                <!-- Technical Analysis Section -->
                <div class="analysis-section">
                    <h3 class="section-title">Technical Analysis</h3>
                    <div class="tech-grid">
                        <!-- SSL Certificate -->
                        <div class="tech-category">
                            <h4>SSL Certificate</h4>
                            <div class="tech-item">
                                <span>Status:</span>
                                <span class="tech-value status-info" id="sslStatus">Checking...</span>
                            </div>
                            <div class="tech-item">
                                <span>Expires:</span>
                                <span class="tech-value" id="sslExpiry">N/A</span>
                            </div>
                        </div>

                        <!-- DNS Records -->
                        <div class="tech-category">
                            <h4>DNS Records</h4>
                            <div class="tech-item">
                                <span>Records Found:</span>
                                <span class="tech-value" id="dnsCount">Checking...</span>
                            </div>
                            <div class="tech-item">
                                <span>Domain Age:</span>
                                <span class="tech-value" id="domainAge">N/A</span>
                            </div>
                        </div>

                        <!-- Threat Intelligence -->
                        <div class="tech-category">
                            <h4>Threat Intelligence</h4>
                            <div class="tech-item">
                                <span>Safe Browsing:</span>
                                <span class="tech-value status-info" id="safeBrowsing">Checking...</span>
                            </div>
                            <div class="tech-item">
                                <span>Blacklist Status:</span>
                                <span class="tech-value status-safe" id="blacklistStatus">Clean</span>
                            </div>
                        </div>

                        <!-- Website Reachability -->
                        <div class="tech-category">
                            <h4>Website Reachability</h4>
                            <div class="tech-item">
                                <span>Status:</span>
                                <span class="tech-value status-info" id="reachabilityStatus">Checking...</span>
                            </div>
                            <div class="tech-item">
                                <span>Response Time:</span>
                                <span class="tech-value" id="responseTime">N/A</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="freelancer-section">
                <h3>Freelancer Protection Guide</h3>
                <p>As a freelancer, you're particularly vulnerable to online scams. Our specialized detector checks for:</p>

                <div class="freelancer-tips">
                    <div class="tip-card">
                        <h4>Fake Job Platforms</h4>
                        <p>Identifies fraudulent freelancing websites that don't pay or steal your work.</p>
                    </div>
                    <div class="tip-card">
                        <h4>Client Verification</h4>
                        <p>Checks if client websites are legitimate businesses with proper online presence.</p>
                    </div>
                    <div class="tip-card">
                        <h4>Payment Scams</h4>
                        <p>Detects websites known for payment fraud or unrealistic payment promises.</p>
                    </div>
                    <div class="tip-card">
                        <h4>Identity Theft</h4>
                        <p>Identifies sites that may be collecting personal information for malicious purposes.</p>
                    </div>
                </div>
            </div>

            <div class="info-section">
                <h3>About This Tool</h3>
                <p>This phishing detector uses machine learning to analyze website URLs and identify potential threats. It examines various features including domain characteristics, suspicious patterns, and URL structure.</p>

                <div class="features">
                    <h4>Features Detected:</h4>
                    <ul>
                        <li>URL length and structure analysis</li>
                        <li>Domain and subdomain characteristics</li>
                        <li>Suspicious keywords and patterns</li>
                        <li>IP address usage detection</li>
                        <li>TLD (Top-Level Domain) analysis</li>
                    </ul>
                </div>

                <div class="api-info">
                    <h4>API Access</h4>
                    <p>For research purposes, API access will be available in the future.</p>
                    <code>GET /api/scan?url=YOUR_URL_HERE</code>
                </div>
            </div>
        </main>

        <footer>
            <p>For research and educational purposes only</p>
        </footer>
    </div>
    <!-- Light Score Popup -->
<!-- Light Score Popup -->
<div id="scorePopup" class="score-popup">
    <div class="score-popup-content">
        <div class="score-popup-header">
            <h3>üî¢ Website Security Score</h3>
            <span class="close-popup" onclick="closeScorePopup()">√ó</span>
        </div>
        
        <div class="score-main">
            <div class="total-score-circle">
                <div class="score-number" id="totalScore">0</div>
                <div class="score-max">/100</div>
            </div>
            <div class="score-status" id="scoreStatusLabel">CALCULATING...</div>
        </div>
        
        <div class="score-breakdown">
            <div class="breakdown-item">
                <span>ü§ñ ML Analysis:</span>
                <span class="score-points" id="mlPoints">+0</span>
            </div>
            <div class="breakdown-item">
                <span>üìß Contact Info:</span>
                <span class="score-points" id="contactPoints">+0</span>
            </div>
            <div class="breakdown-item">
                <span>üñºÔ∏è Image Analysis:</span>
                <span class="score-points" id="imagePoints">+0</span>
            </div>
            <div class="breakdown-item">
                <span>üîê SSL:</span>
                <span class="score-points" id="sslPoints">+0</span>
            </div>
            <div class="breakdown-item">
                <span>üåê DNS:</span>
                <span class="score-points" id="dnsPoints">+0</span>
            </div>
            <div class="breakdown-item">
                <span>üöÄ Reachability:</span>
                <span class="score-points" id="reachPoints">+0</span>
            </div>
            <div class="breakdown-item penalties" id="penaltiesItem" style="display: none;">
                <span>‚ö†Ô∏è Penalties:</span>
                <span class="score-points negative" id="penaltyPoints">-0</span>
            </div>
        </div>
        
        <div class="score-threshold">
            <div class="threshold-line">
                <div class="threshold-label">Threshold: 50</div>
            </div>
            <div class="verdict-box" id="verdictBox">
                <div id="verdictText">Score will appear here</div>
            </div>
        </div>
        
        <div class="popup-footer">
            <button onclick="closeScorePopup()">Close</button>
        </div>
         <div class="popup-footer">
            <button onclick="closeScorePopup()">OK, Got it</button>
            <button onclick="closeScorePopup()" style="background: #95a5a6; margin-left: 10px;">Close</button>
        </div>
        
    </div>
</div>

<script src="{{ url_for('static', filename='script.js') }}"></script>

</body>
</html>